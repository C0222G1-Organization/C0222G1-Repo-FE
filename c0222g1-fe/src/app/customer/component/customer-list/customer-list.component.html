<body>
<div class="container mt-4" id="table-computer">
  <div [formGroup]="formSearch">
    <div class="row">
      <h2 class="text-center text-white">DANH SÁCH KHÁCH HÀNG</h2>
      <div class=" text-white my-5">
<!--        row search 1-->
        <div class="row" style="height: 60px">
          <div class="col-3 d-flex outline">
            <div class="col-6">
              <label for="nameCustomer">Tên khách hàng</label>
            </div>
            <div class="col-6">
              <input (keydown.enter)="getAllCustomer()" formControlName="nameCustomer" id="nameCustomer" type="text" class="input-search form-control"
                     placeholder="Nhập tên">

              <div style="font-size: small" class="text-danger"
                   *ngIf="formSearch.controls.nameCustomer.hasError('maxlength') && formSearch.controls.nameCustomer.dirty"> Bạn nhập quá dài.
              </div>
              <div style="font-size: small" class="text-danger"
                   *ngIf="formSearch.controls.nameCustomer.hasError('minlength') && formSearch.controls.nameCustomer.dirty"> Bạn nhập quá ngắn
              </div>
            </div>

          </div>
          <div class="col-4 d-flex">
            <div class="col-1"></div>
            <div class="col-4">
              <label for="starDate">Ngày sinh từ</label>
            </div>
            <div class="col-6">
              <input (keydown.enter)="getAllCustomer()" formControlName="starDate" id="starDate" type="date" class="form-control input-search">
              <div style="font-size: small" class="text-danger"
                   *ngIf="formSearch.hasError('errorDate') && formSearch.touched">Ngày không hợp lệ để tìm kiếm (nhỏ hơn
                ngày bên dưới)
              </div>
              <!--              <div class=" text-danger" style="font-size: small;float: right"  *ngIf="!formSearch.invalid && formSearch.touched">00</div>-->
            </div>

          </div>
          <div class="col-3 d-flex">
            <div class="col-4">
              <label for="status">Trạng thái</label>
            </div>
            <div class="col-4">
              <select (keydown.enter)="getAllCustomer()" id="status" style="min-width: 100px" class="input-search form-control"
                      formControlName="activeStatus">
                <option value="">Tất cả</option>
                <option value="1">Đang hoạt động</option>
                <option value="0">Ngưng hoạt động</option>
              </select>
            </div>
          </div>
          <div class="col-2 d-flex"></div>
        </div>
<!--        row search 2-->
        <div class="row ">
          <div class="col-3 d-flex">
            <div class="col-6">
              <label for="address">Địa chỉ</label>
            </div>
            <div class="col-4">
              <input (keydown.enter)="getAllCustomer()" formControlName="address" id="address" type="text" class="input-search form-control"
                     placeholder="Nhập địa chỉ">
            </div>
            <div style="font-size: small" class="text-danger"
                 *ngIf="formSearch.controls.address.hasError('minlength') && formSearch.controls.address.dirty"> Vui lòng nhập
            </div>
            <div style="font-size: small" class="text-danger"
                 *ngIf="formSearch.controls.address.hasError('maxlength') && formSearch.controls.address.dirty"> Bạn nhập quá dài
            </div>
          </div>
          <div class="col-4 d-flex">
            <div class="col-1"></div>
            <div class="col-4">
              <label for="endDate">Đến</label>
            </div>
            <div class="col-6">
              <input (keydown.enter)="getAllCustomer()" formControlName="endDate" id="endDate" type="date" class="input-search form-control">
              <div style="font-size: small" class="text-danger"
                   *ngIf="formSearch.get('endDate').hasError('errorDate') && formSearch.get('endDate').touched">ngày không hợp lệ
              </div>
            </div>
          </div>
          <div class="col-3 d-flex">
            <div class="col-4"></div>
            <div class="col-5">
              <button [disabled]="formSearch.invalid" class="btn btn-outline-secondary w-20 classDisabled" (click)="getAllCustomer()">
                Tìm kiếm
              </button>
            </div>
            <div class="col-3">
              <button (click)="reload() "   class="btn btn-outline-secondary w-20 classDisabled">
                <i class="fa-solid fa-arrows-rotate"></i>
              </button>
            </div>

          </div>

        </div>
      </div>
    </div >
  </div>
<!--  table-->
  <div style=" height: 370px">
    <table class="table table-dark w-100">
      <thead>
      <tr>

        <th class="w-5">
          <div>
            <input type="checkbox" [checked]="isAllCheckBoxChecked()" (change)="checkAllCheckBox($event)">
          </div>
        </th>
        <th>#</th>
        <th scope="col">Họ và tên</th>
        <th scope="col">Email</th>
        <th scope="col">Ngày sinh</th>
        <th class="w-10" scope="col">Địa chỉ</th>
        <th scope="col">SĐT</th>
        <th scope="col">Trạng thái</th>
        <th colspan="2" scope="col">Chức năng</th>
      </tr>
      </thead>
      <tbody>
      <tr
        *ngFor="let temp of listCustomer | paginate: {itemsPerPage: 5, currentPage: page+1, totalItems: element};let i = index">
        <!--          <td><input type="checkbox" [checked]="statusCheckBox" (change)="getIdCheck(temp,$event.target.checked)"></td>-->
        <td><input class="card-notify-year-checkbox" type="checkbox" value="{{temp.id}}"
                   [(ngModel)]="listCustomer[i].checked "></td>
        <td class="w-5">{{i + 1}}</td>
        <td class="w-10">{{temp.name}}</td>
        <td class="w-10">{{temp.email}}</td>
        <td class="w-10">{{temp.dateOfBirth}}</td>
        <td>{{temp.nameCommune}} - {{temp.nameDistrict}} - {{temp.nameProvince}} </td>
        <td class="w-10">{{temp.phoneNumber}}</td>
        <td class="w-10">{{temp.activeStatus == 1 ? 'Đang hoạt động' : 'Ngưng hoạt động'}}</td>
        <td class="w-5">
          <button class="btn btn-outline-secondary" routerLink="/customers/edit/{{temp.id}}">
            <i class="fa-solid fa-pencil"></i>
          </button>
        </td>
        <td class="w-5">
          <button [disabled]="map.size!==0" class="btn btn-outline-secondary ml-2" data-bs-toggle="modal"
                  data-bs-target="#deleteModal" (click)="getIdDeleteInTable(temp)"><i class="fa-solid fa-trash"></i>
          </button>
        </td>
      </tr>
      <tr>
        <td colspan="9" class="container mt-2 justify-content-center" *ngIf="listCustomer.length == 0">
          <img src="https://i.pinimg.com/originals/73/b0/05/73b0054acf8be08b254ba90945a19d09.gif"
               style="width: 100%; height: 300px">
        </td>
      </tr>

      </tbody>

    </table>
  </div>
  <div>
<!--    button create and delete all-->
  <div class="row " id="btn-outside">
    <div class="col-4">
      <button routerLink="/customers/create" class="btn btn-primary">Thêm mới khách hàng</button>
    </div>
    <div class="col-4"></div>
    <div class="col-4">
      <div style="text-align: right" *ngIf="map.size!==0">
        <button style="margin-right: 11px" class="btn btn-primary " data-bs-toggle="modal"
                data-bs-target="#deleteModal">Xóa
        </button>
      </div>
    </div>

  </div>
<!--    Pagination-->
  <div style="justify-content: space-around;display: flex;" *ngIf="element!==0" >
    <pagination-controls class="buttonPagination" style="color: black"
                         (pageChange)=getPage($event)></pagination-controls>
  </div>
  </div>
</div>


<!-- Delete Modal-->
<div class="modal fade " id="deleteModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel1">Xóa khách hàng</h5>
      </div>
      <div class="modal-body" *ngIf="map.size==0">
        <table class="table table-dark">
          <thead>
          <tr>
            <th scope="col">#</th>
            <th scope="col">Tên</th>
          </tr>
          </thead>
          <tbody>
          <tr>
            <td>1</td>
            <td>{{idCustomerDelete.name}}</td>
          </tr>
          </tbody>
        </table>
      </div>
      <div class="modal-body" *ngIf="map.size!==0">
        <table class="table table-dark">
          <thead>
          <tr>
            <th scope="col">#</th>
            <th scope="col">Tên</th>
          </tr>
          </thead>
          <tbody>
          <tr *ngFor="let customer of map | keyvalue ; let i = index">
            <td>{{i + 1}}</td>
            <td>{{customer.value.name}}</td>
          </tr>
          </tbody>
        </table>

      </div>
      <div class="modal-footer">
        <button (click)="close()" type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal">Đóng</button>
        <button *ngIf="map.size ==0" type="button" class="btn btn-primary" data-bs-dismiss="modal"
                (click)="deleteCustomer()">Xóa
        </button>
        <button *ngIf="map.size!==0" type="button" class="btn btn-primary" data-bs-dismiss="modal"
                (click)="DeleteById()">Xóa1
        </button>
      </div>
    </div>
  </div>
</div>



</body>

